using System;
using System.Text;
using System.Collections.Generic;
using System.Linq;
using LizhiRedBaoFiddlerPlugin;
using Microsoft.VisualStudio.TestTools.UnitTesting;

namespace LizhiRedBaoFiddlerPluginTests
{
    /// <summary>
    /// Summary description for UnitTest1
    /// </summary>
    [TestClass]
    public class UnitTest1
    {
        public UnitTest1()
        {
            //
            // TODO: Add constructor logic here
            //
        }

        private TestContext testContextInstance;

        /// <summary>
        ///Gets or sets the test context which provides
        ///information about and functionality for the current test run.
        ///</summary>
        public TestContext TestContext
        {
            get
            {
                return testContextInstance;
            }
            set
            {
                testContextInstance = value;
            }
        }

        #region Additional test attributes
        //
        // You can use the following additional attributes as you write your tests:
        //
        // Use ClassInitialize to run code before running the first test in the class
        // [ClassInitialize()]
        // public static void MyClassInitialize(TestContext testContext) { }
        //
        // Use ClassCleanup to run code after all tests in a class have run
        // [ClassCleanup()]
        // public static void MyClassCleanup() { }
        //
        // Use TestInitialize to run code before running each test 
        // [TestInitialize()]
        // public void MyTestInitialize() { }
        //
        // Use TestCleanup to run code after each test has run
        // [TestCleanup()]
        // public void MyTestCleanup() { }
        //
        #endregion

        [TestMethod]
        public void TestHotListRegex()
        {
            string testContent =
                $@"{{""code"":0,""msg"":null,""ret"":{{""dataList"":[{{""radioConver"":""http://cdn.lizhi.fm//studio/2017/10/28/2632700453237120566.jpg"",""liveStatus"":1,""totalCount"":""4889"",""liveName"":""果儿满月啦！"",""userName"":""果儿🤗"",""liveId"":""2632700455828901942"",""userPortrait"":""http://cdn5.lizhi.fm/user//2017/10/07/2628802955097966594_80x80.jpg"",""liveStartTime"":1509192005000,""liveEndTime"":1509202805000,""tag"":""娱乐""}},{{""radioConver"":""http://cdn.lizhi.fm//studio/2017/10/28/2632656096962905142.jpg"",""liveStatus"":1,""totalCount"":""2968"",""liveName"":""红包，半年感恩特别场！"",""userName"":""贝拉🐚10.28半年"",""liveId"":""2632656097401898550"",""userPortrait"":""http://cdn5.lizhi.fm/user//2017/09/02/2622373399795311106_80x80.jpg"",""liveStartTime"":1509192014000,""liveEndTime"":1509202814000,""tag"":""名嘴秀""}},{{""radioConver"":""http://cdn.lizhi.fm//studio/2017/10/28/2632735253206841910.jpg"",""liveStatus"":1,""totalCount"":""1058"",""liveName"":""卡人百天🤗特別場"",""userName"":""卡人🎨 10-28百天"",""liveId"":""2632735253653431862"",""userPortrait"":""http://cdn5.lizhi.fm/user//2017/10/27/2632464620875847170_80x80.jpg"",""liveStartTime"":1509192000000,""liveEndTime"":1509202800000,""tag"":""""}},{{""radioConver"":""http://cdn.lizhi.fm//studio/2017/10/28/2632737338415731766.jpg"",""liveStatus"":1,""totalCount"":""2529"",""liveName"":""哇咔咔"",""userName"":""控野啊 素未谋面"",""liveId"":""2632737338440555574"",""userPortrait"":""http://cdn5.lizhi.fm/user//2017/10/25/2632143159753212930_80x80.jpg"",""liveStartTime"":1509192000000,""liveEndTime"":1509195600000,""tag"":""""}},{{""radioConver"":""http://cdn.lizhi.fm//studio/2017/10/28/2632731778578785334.png"",""liveStatus"":1,""totalCount"":""2169"",""liveName"":""【红包】怪叔叔🎍"",""userName"":""里言🔥尚源传媒"",""liveId"":""2632731779020145718"",""userPortrait"":""http://cdn5.lizhi.fm/user//2017/09/24/2626276988193369602_80x80.jpg"",""liveStartTime"":1509190200000,""liveEndTime"":1509193800000,""tag"":""民谣""}},{{""radioConver"":""http://cdn.lizhi.fm//studio/2017/10/28/2632721631718412342.jpg"",""liveStatus"":1,""totalCount"":""14444"",""liveName"":""（红包）YSL向阳百天感恩场"",""userName"":""YSL向阳👑土锤🔥"",""liveId"":""2632721633893033526"",""userPortrait"":""http://cdn5.lizhi.fm/user//2017/10/27/2632456627941469698_80x80.jpg"",""liveStartTime"":1509188453000,""liveEndTime"":1509204600000,""tag"":""搞笑""}},{{""radioConver"":""http://cdn.lizhi.fm//studio/2017/10/28/2632719892255998518.jpg"",""liveStatus"":1,""totalCount"":""8749"",""liveName"":""【红包】【双满】你的日语系主播，今天双满了！"",""userName"":""曦白✨星尚Radio"",""liveId"":""2632719894492437558"",""userPortrait"":""http://cdn5.lizhi.fm/user//2017/10/27/2632455328713324034_80x80.jpg"",""liveStartTime"":1509188400000,""liveEndTime"":1509192000000,""tag"":""连线""}},{{""radioConver"":""http://cdn.lizhi.fm//studio/2017/10/27/2632553296919651894.jpg"",""liveStatus"":1,""totalCount"":""183068"",""liveName"":""Vk荔枝玩唱会"",""userName"":""Vk"",""liveId"":""2632553299530007094"",""userPortrait"":""http://cdn5.lizhi.fm/user//2017/05/28/2604324179835460098_80x80.jpg"",""liveStartTime"":1509192022000,""liveEndTime"":1509195622000,""tag"":""音乐""}},{{""radioConver"":""http://cdn.lizhi.fm//studio/2017/10/28/2632726579523733558.jpg"",""liveStatus"":1,""totalCount"":""1239"",""liveName"":""红包雨➕百天"",""userName"":""大仁❤️【暖声radio】"",""liveId"":""2632726581961790518"",""userPortrait"":""http://cdn5.lizhi.fm/user//2017/10/26/2632288282405736962_80x80.jpg"",""liveStartTime"":1509192016000,""liveEndTime"":1509199216000,""tag"":""音乐""}},{{""radioConver"":""http://cdn.lizhi.fm//studio/2017/10/28/2632658132774714934.jpg"",""liveStatus"":1,""totalCount"":""4609"",""liveName"":""【红包】【双满】皮小皮双满啦"",""userName"":""🥂皮斯克🍷10.28双满"",""liveId"":""2632658135421626422"",""userPortrait"":""http://cdn5.lizhi.fm/user//2017/10/28/2632674095022939138_80x80.jpg"",""liveStartTime"":1509328807000,""liveEndTime"":1509332407000,""tag"":""""}},{{""radioConver"":""http://cdn.lizhi.fm//studio/2017/10/28/2632717379703767606.jpg"",""liveStatus"":1,""totalCount"":""2649"",""liveName"":""（红包雨） 斯伦✨10.28百天"",""userName"":""斯伦✨星尚Radio🎡"",""liveId"":""2632680179402002486"",""userPortrait"":""http://cdn5.lizhi.fm/user//2017/10/17/2630723728898749442_80x80.jpg"",""liveStartTime"":1509192000000,""liveEndTime"":1509201000000,""tag"":""音乐""}},{{""radioConver"":""http://cdn.lizhi.fm//studio/2017/10/28/2632645905002924086.jpg"",""liveStatus"":1,""totalCount"":""7979"",""liveName"":""唱歌唱歌"",""userName"":""大L-"",""liveId"":""2632645905445108790"",""userPortrait"":""http://cdn5.lizhi.fm/user//2017/09/15/2624760821788532226_80x80.jpg"",""liveStartTime"":1509192011000,""liveEndTime"":1509199211000,""tag"":""""}},{{""radioConver"":""http://cdn.lizhi.fm//studio/2017/10/28/2632734965446042166.png"",""liveStatus"":1,""totalCount"":""1469"",""liveName"":""[红包雨🔥]打电话搞事情"",""userName"":""羽陌💫浮声荟"",""liveId"":""2632734965354456118"",""userPortrait"":""http://cdn5.lizhi.fm/user//2017/09/18/2625260165426661890_80x80.jpg"",""liveStartTime"":1509192000000,""liveEndTime"":1509195600000,""tag"":""连线""}},{{""radioConver"":""http://cdn.lizhi.fm//studio/2017/10/27/2632450352995829302.jpg"",""liveStatus"":1,""totalCount"":""4519"",""liveName"":""听听音乐吧！"",""userName"":""CV清影轩阳"",""liveId"":""2632450353288586294"",""userPortrait"":""http://cdn5.lizhi.fm/user//2016/10/08/2561236827146841602_80x80.jpg"",""liveStartTime"":1509188421000,""liveEndTime"":1509192021000,""tag"":""翻唱""}},{{""radioConver"":""http://cdn.lizhi.fm//studio/2017/10/28/2632736582501922358.jpg"",""liveStatus"":1,""totalCount"":""1559"",""liveName"":""【红包】小鱼儿🐠满月啦"",""userName"":""非鱼✨沐聲天团💫"",""liveId"":""2632736583057476150"",""userPortrait"":""http://cdn5.lizhi.fm/user//2017/09/30/2627549224080586242_80x80.jpg"",""liveStartTime"":1509192000000,""liveEndTime"":1509195600000,""tag"":""民谣""}},{{""radioConver"":""http://cdn5.lizhi.fm/radio_cover//2017/06/28/2610056728283011076_200x200.jpg"",""liveStatus"":1,""totalCount"":""2789"",""liveName"":""王汉三开播了"",""userName"":""王厲害☀️"",""liveId"":""2632734405040093750"",""userPortrait"":""http://cdn5.lizhi.fm/user//2017/10/28/2632729545197594626_80x80.jpg"",""liveStartTime"":1509192000000,""liveEndTime"":1509197400000,""tag"":""音乐""}},{{""radioConver"":""http://cdn.lizhi.fm//studio/2017/10/28/2632738143722648630.jpg"",""liveStatus"":1,""totalCount"":""1927"",""liveName"":""Kevin满月特别场"",""userName"":""Kevin💫〔十三月〕"",""liveId"":""2632738143801371190"",""userPortrait"":""http://cdn5.lizhi.fm/user//2017/10/17/2630608844966176258_80x80.jpg"",""liveStartTime"":1509195600000,""liveEndTime"":1509201000000,""tag"":""脱口秀""}},{{""radioConver"":""http://cdn.lizhi.fm//studio/2017/10/28/2632726607439978038.jpg"",""liveStatus"":1,""totalCount"":""8169"",""liveName"":""【满汉陌秋离】月底冲刺"",""userName"":""陌秋离（梨苑Radio）"",""liveId"":""2632726609674072118"",""userPortrait"":""http://cdn5.lizhi.fm/user//2017/08/31/2621867602970395650_80x80.jpg"",""liveStartTime"":1509188400000,""liveEndTime"":1509193800000,""tag"":""古风""}},{{""radioConver"":""http://cdn.lizhi.fm//studio/2017/10/28/2632662004688736310.jpg"",""liveStatus"":1,""totalCount"":""1649"",""liveName"":""谁还没点小脾气了"",""userName"":""歌生🌿素未谋面"",""liveId"":""2632662005183631926"",""userPortrait"":""http://cdn5.lizhi.fm/user//2017/10/15/2630340072355377666_80x80.jpg"",""liveStartTime"":1509197400000,""liveEndTime"":1509204600000,""tag"":""陪聊""}},{{""radioConver"":""http://cdn.lizhi.fm//studio/2017/10/28/2632729238107138614.jpg"",""liveStatus"":1,""totalCount"":""3529"",""liveName"":""[双满特别场]今晚注定嗨皮"",""userName"":""爱 旭🔥火力全开🔥"",""liveId"":""2632729240335708214"",""userPortrait"":""http://cdn5.lizhi.fm/user//2017/10/25/2632170026920221186_80x80.jpg"",""liveStartTime"":1509192000000,""liveEndTime"":1509202800000,""tag"":""音乐""}},{{""radioConver"":""http://cdn.lizhi.fm//studio/2017/10/28/2632733801509792310.jpg"",""liveStatus"":1,""totalCount"":""3119"",""liveName"":""【红包】你们玩荔枝多久了？"",""userName"":""秦桑❣【暖声radio】"",""liveId"":""2632733801973713462"",""userPortrait"":""http://cdn5.lizhi.fm/user//2017/10/25/2632092434044893186_80x80.jpg"",""liveStartTime"":1509190200000,""liveEndTime"":1509193800000,""tag"":""陪聊""}},{{""radioConver"":""http://cdn.lizhi.fm//studio/2017/10/28/2632723132809746998.jpg"",""liveStatus"":1,""totalCount"":""5069"",""liveName"":""我不曾想过你会来"",""userName"":""寻七✨月底冲刺"",""liveId"":""2632723132897908278"",""userPortrait"":""http://cdn5.lizhi.fm/user//2017/04/14/2596190529684023810_80x80.png"",""liveStartTime"":1509190200000,""liveEndTime"":1509197400000,""tag"":""情感""}},{{""radioConver"":""http://cdn.lizhi.fm//studio/2017/10/28/2632727569513516086.jpg"",""liveStatus"":1,""totalCount"":""24939"",""liveName"":""【特别场】三火家の三百日"",""userName"":""三火sama【独角戏】"",""liveId"":""2632546944742307894"",""userPortrait"":""http://cdn5.lizhi.fm/user//2017/09/30/2627535501400156162_80x80.jpg"",""liveStartTime"":1509188400000,""liveEndTime"":1509204600000,""tag"":""二次元""}},{{""radioConver"":""http://cdn.lizhi.fm//studio/2017/10/28/2632680975560815670.jpg"",""liveStatus"":1,""totalCount"":""4388"",""liveName"":""【红包】百天盛典"",""userName"":""梦阳【今天百天】"",""liveId"":""2632680978204553270"",""userPortrait"":""http://cdn5.lizhi.fm/user//2017/10/13/2629802514247406594_80x80.jpg"",""liveStartTime"":1509188413000,""liveEndTime"":1509202813000,""tag"":""娱乐""}},{{""radioConver"":""http://cdn.lizhi.fm//studio/2017/10/28/2632734903166891574.jpg"",""liveStatus"":1,""totalCount"":""1909"",""liveName"":""红包浪浪浪"",""userName"":""浪浪浪✨我的小兔子冠"",""liveId"":""2632734903610172470"",""userPortrait"":""http://cdn5.lizhi.fm/user//2017/10/12/2629775217584369666_80x80.jpg"",""liveStartTime"":1509192000000,""liveEndTime"":1509195600000,""tag"":""连线""}},{{""radioConver"":""http://cdn.lizhi.fm//studio/2017/10/28/2632730041265902134.jpg"",""liveStatus"":1,""totalCount"":""7260"",""liveName"":""【红包】百天歌会"",""userName"":""葫芦山 🌋10.28百天"",""liveId"":""2632730041558453814"",""userPortrait"":""http://cdn5.lizhi.fm/user//2017/10/16/2630364650302477314_80x80.jpg"",""liveStartTime"":1509190206000,""liveEndTime"":1509193806000,""tag"":""音乐""}},{{""radioConver"":""http://cdn.lizhi.fm//studio/2017/10/28/2632704357362893366.jpg"",""liveStatus"":1,""totalCount"":""17107"",""liveName"":""【红包】生日狂欢夜🎉别进来太嗨了😱"",""userName"":""瑾辰🌟10.28破蛋日"",""liveId"":""2632704357269931574"",""userPortrait"":""http://cdn5.lizhi.fm/user//2017/10/26/2632269363074767362_80x80.jpg"",""liveStartTime"":1509188437000,""liveEndTime"":1509195637000,""tag"":""娱乐""}},{{""radioConver"":""http://cdn.lizhi.fm//studio/2017/10/28/2632734559570118710.jpg"",""liveStatus"":1,""totalCount"":""4849"",""liveName"":""【红包】想唱首锅给里听"",""userName"":""狮子.🦁"",""liveId"":""2632734559650931254"",""userPortrait"":""http://cdn5.lizhi.fm/user//2017/10/11/2629527797401641986_80x80.jpg"",""liveStartTime"":1509192000000,""liveEndTime"":1509197400000,""tag"":""翻唱""}},{{""radioConver"":""http://cdn.lizhi.fm//studio/2017/10/28/2632720338933816886.jpg"",""liveStatus"":1,""totalCount"":""10608"",""liveName"":""感恩双满特别回馈"",""userName"":""哼唧🤔28感恩双满"",""liveId"":""2632720341162957878"",""userPortrait"":""http://cdn5.lizhi.fm/user//2017/10/27/2632402019579628034_80x80.jpg"",""liveStartTime"":1509188400000,""liveEndTime"":1509204600000,""tag"":""音乐""}},{{""radioConver"":""http://cdn.lizhi.fm//studio/2017/10/28/2632725443504203318.jpg"",""liveStatus"":1,""totalCount"":""9569"",""liveName"":""(翻唱)用心讲述一段故事"",""userName"":""🎼米诺🍋（梨苑Radio)"",""liveId"":""2632725443584335926"",""userPortrait"":""http://cdn5.lizhi.fm/user//2017/09/02/2622334586174433282_80x80.jpg"",""liveStartTime"":1509186600000,""liveEndTime"":1509199200000,""tag"":""翻唱""}},{{""radioConver"":""http://cdn.lizhi.fm//studio/2017/10/28/2632728937458331190.jpg"",""liveStatus"":1,""totalCount"":""8149"",""liveName"":""【红包】不给糖就捣蛋～"",""userName"":""9527^·Princess"",""liveId"":""2632728937368415286"",""userPortrait"":""http://cdn5.lizhi.fm/user//2017/09/02/2622349657213316610_80x80.jpg"",""liveStartTime"":1509188400000,""liveEndTime"":1509192000000,""tag"":""娱乐""}},{{""radioConver"":""http://cdn.lizhi.fm//studio/2017/10/28/2632707696697599542.jpg"",""liveStatus"":1,""totalCount"":""7678"",""liveName"":""特别场【百天快乐】"",""userName"":""MC无眠🍭【声℃】"",""liveId"":""2632706734535149622"",""userPortrait"":""http://cdn5.lizhi.fm/user//2017/10/26/2632312454479919618_80x80.jpg"",""liveStartTime"":1509188400000,""liveEndTime"":1509197400000,""tag"":""喊麦""}},{{""radioConver"":""http://cdn.lizhi.fm//studio/2017/10/28/2632736120792765494.jpg"",""liveStatus"":1,""totalCount"":""1029"",""liveName"":""🎷豆花儿☀️†众神的直播"",""userName"":""🎷豆花儿☀️†众神"",""liveId"":""2632736121083256886"",""userPortrait"":""http://cdn5.lizhi.fm/user//2017/10/10/2629361713164450818_80x80.jpg"",""liveStartTime"":1509192000000,""liveEndTime"":1509195600000,""tag"":""连线""}},{{""radioConver"":""http://cdn.lizhi.fm//studio/2017/10/28/2632737082863413814.jpg"",""liveStatus"":1,""totalCount"":""4609"",""liveName"":""🔮super t【众神乐团】的直播"",""userName"":""🔮super t【众神乐团】"",""liveId"":""2632737083362669110"",""userPortrait"":""http://cdn5.lizhi.fm/user//2017/09/15/2624763909872901122_80x80.jpg"",""liveStartTime"":1509192000000,""liveEndTime"":1509195600000,""tag"":""""}},{{""radioConver"":""http://cdn.lizhi.fm//studio/2017/10/28/2632719482086388790.jpg"",""liveStatus"":1,""totalCount"":""16259"",""liveName"":""【红包雨】满月特别场"",""userName"":""CT 呐『全能男孩』"",""liveId"":""2632719482169438774"",""userPortrait"":""http://cdn5.lizhi.fm/user//2017/10/09/2629216815999993346_80x80.jpg"",""liveStartTime"":1509188400000,""liveEndTime"":1509204600000,""tag"":""音乐""}},{{""radioConver"":""http://cdn.lizhi.fm//studio/2017/10/28/2632731881658156598.jpg"",""liveStatus"":1,""totalCount"":""2369"",""liveName"":""[温情十月福利特别场]"",""userName"":""梵洛「✨纾软冠名✨」"",""liveId"":""2632676227938096694"",""userPortrait"":""http://cdn5.lizhi.fm/user//2017/10/09/2629232350894245890_80x80.jpg"",""liveStartTime"":1509192000000,""liveEndTime"":1509199200000,""tag"":""偶像""}},{{""radioConver"":""http://cdn.lizhi.fm//studio/2017/10/28/2632732661194989622.jpg"",""liveStatus"":1,""totalCount"":""1988"",""liveName"":""[红包雨]荔枝半周年庆典-善良的摸摸头"",""userName"":""善良的摸摸头🐔"",""liveId"":""2632732661275281462"",""userPortrait"":""http://cdn5.lizhi.fm/user//2017/10/28/2632663580940484610_80x80.jpg"",""liveStartTime"":1509192000000,""liveEndTime"":1509202800000,""tag"":""音乐""}},{{""radioConver"":""http://cdn.lizhi.fm//studio/2017/10/28/2632664485031748150.jpg"",""liveStatus"":1,""totalCount"":""2139"",""liveName"":""红包月 满月场"",""userName"":""To小尊⚡28满月"",""liveId"":""2632664487205251638"",""userPortrait"":""http://cdn5.lizhi.fm/user//2017/10/28/2632662835763802626_80x80.jpg"",""liveStartTime"":1509192000000,""liveEndTime"":1509195600000,""tag"":""连线""}},{{""radioConver"":""http://cdn.lizhi.fm//studio/2017/10/28/2632733786478322742.jpg"",""liveStatus"":1,""totalCount"":""2119"",""liveName"":""菟子先生🐳10.28双满月的直播"",""userName"":""菟子先生🐳10.28双满月"",""liveId"":""2632713375201417782"",""userPortrait"":""http://cdn5.lizhi.fm/user//2017/10/28/2632704960805846530_80x80.jpg"",""liveStartTime"":1509192000000,""liveEndTime"":1509197400000,""tag"":""连线""}},{{""radioConver"":""http://cdn.lizhi.fm//studio/2017/10/28/2632698782494977590.jpg"",""liveStatus"":1,""totalCount"":""1089"",""liveName"":""【红包】小公举们周末愉快！"",""userName"":""林远方🃏"",""liveId"":""2632698785136765494"",""userPortrait"":""http://cdn5.lizhi.fm/user//2017/09/27/2626921978466088962_80x80.jpg"",""liveStartTime"":1509192035000,""liveEndTime"":1509197435000,""tag"":""翻唱""}}],""count"":40,""pageTotal"":1,""dataVerTime"":""1509192331"",""pageNum"":1}},""opt"":null}}";

            var result = GetHotListUsers.GetHotUsers(testContent);

            //
            // TODO: Add test logic here
            //
        }



        [TestMethod]
        public void TestLoadHotUsers()
        {
            Class1 lizhiRedBaoFiddlerPlugin = new Class1();
            List<UserId> hotUserIds = new List<UserId>();
            lizhiRedBaoFiddlerPlugin.GetHotUsersList(hotUserIds);
            Assert.IsTrue(hotUserIds.Count > 0);
        }
    }
}
